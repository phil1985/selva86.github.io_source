<blockquote>
<p>This is a beginner, non-programmer friendly guide to learn and understand the R language from scratch, giving a brief walkthrough of the most important parts of the language in plain english, intended to get you on board fairly quick.</p>
</blockquote>
<p>I assume that you have <a href="https://cran.r-project.org/">R</a> or <a href="https://rstudio.com/">RStudio installed</a> and are ready to follow along, typing the codes in to your R console as you learn. So without further adieu lets jump right in.</p>
<h2>Section 1</h2>
<h4>First Touch: R As A Calculator</h4>
<p>Illustration of The Components of R Window</p>
<p><img src='screenshots/RStudio-window.png' width=528 height=310 /></p>
<p>If not for anything else, the R console can be used as a built-in calculator. Open your R console and type the following in. You need not type in anything after the <code>#</code> symbol in your console because the hash <code>#</code> is a comment character. R ignores everything that comes after the <code>#</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> +<span class="st"> </span><span class="dv">3</span>  <span class="co"># the space around &#39;+&#39; is optional</span></code></pre></div>
<p>That prints out the number 5 as the answer in your console. Lets try some more.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> *<span class="st"> </span><span class="dv">3</span>  <span class="co">#=&gt; 6</span>
<span class="kw">sqrt</span>(<span class="dv">36</span>)  <span class="co">#=&gt; 6, square root</span>
<span class="kw">log10</span>(<span class="dv">100</span>)  <span class="co">#=&gt; 2, log base 10</span>
<span class="dv">10</span> /<span class="st"> </span><span class="dv">3</span>  <span class="co">#=&gt; 3.3, 10 by 3</span>
<span class="dv">10</span> %/%<span class="st"> </span><span class="dv">3</span>  <span class="co">#=&gt; 3, quotient of 10 by 3</span>
<span class="dv">10</span> %%<span class="st"> </span><span class="dv">3</span>  <span class="co">#=&gt; 1, remainder of 10 by 3</span></code></pre></div>
<h4>The Assignment Operator</h4>
<p>The next thing you need to know about is R’s assignment operator. Unlike most other languages, R uses a <code>&lt;-</code> operator in addition to the usual <code>=</code> operator for assigning values. So whenever you see a <code>&lt;-</code> in R code, know that it just works like a <code>=</code> but in both directions. Here is an example for you to try out in your R console. Alternatively, you can use the R Editor to type in all 4 lines at once and press <code>Cmd+R</code>(on Mac) or <code>Ctrl+R</code>(on Windows) keys to run the selection or current line. In RStudio, use <code>Cmd+Enter</code> to <code>Ctrl+Enter</code> instead.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="dv">10</span>  <span class="co"># assign 10 to &#39;a&#39;</span>
a =<span class="st"> </span><span class="dv">10</span>  <span class="co"># same as above</span>
<span class="dv">10</span> -&gt;<span class="st"> </span>a  <span class="co"># assign 10 to &#39;a&#39;</span>
<span class="dv">10</span> =<span class="st"> </span>a  <span class="co"># Wrong!. This will try to assign `a` to 10.</span></code></pre></div>
<h4>Classes or Data types</h4>
<p>In previous code, you may have noticed that there is no dedicated step to define the type of variable. R intuitively decides that in the background and assigns a <code>class</code> to the variable.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(a)  <span class="co"># numeric</span></code></pre></div>
<p>Based on the value assigned to variable a, R decided to assign its class as a <code>numeric</code>. If you choose to change it as a character ’10’ instead of number 10, that can be done as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="kw">as.character</span>(a)
<span class="kw">print</span>(a)  <span class="co"># prints out the value of a</span>
<span class="kw">class</span>(a)  <span class="co"># character</span></code></pre></div>
<p>Find out what happens when you try to convert a character to a numeric using <code>as.numeric()</code>. The next question naturally is what are the different types of classes available in R. The answer actually is infinite, since the users are free to define new classes, but here is some of most commonly used ones:</p>
<h4>Variable Types</h4>
<ul>
<li>character – Strings</li>
<li>integer – Integers</li>
<li>numeric – Integers + Fractions</li>
<li>factor – Categorical variable where each level is a category</li>
<li>logical – Boolean</li>
<li>complex – Complex numbers</li>
</ul>
<h4>Data Types</h4>
<ul>
<li>vector – A collection of elements of same class</li>
<li>matrix – All columns must uniformly contain only one variable type.</li>
<li>data.frame – The columns can contain different classes.</li>
<li>list – Can hold objects of different classes and lengths</li>
</ul>
<hr />
<h3>Some Miscellaneous but Important Items Before We Proceed . .</h3>
<h4>What is a R package and how to install them?</h4>
<p>Upon your first install, R comes with a built-in set of packages which can be invoked directly from your R console. However, since R is a open-source language, anyone can contribute to its capabilities by writing packages. Over the years, these contributions have resulted in growing list of over 5k packages. Here is how you can install the packages from within R console:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;car&quot;</span>)  <span class="co"># install car package </span></code></pre></div>
<p>The above code will prompt you to select the CRAN mirror for which you can select one that is closest to your place. The dot(.) in <code>install.packages</code> is a part of its name and not two separate commands.</p>
<p>Now that the package is installed, you need to initialise it before you can call the functions and datasets that come with the installed package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(car)  <span class="co"># initialise the pkg &#39;car&#39;</span>
<span class="kw">require</span>(car)  <span class="co"># another way to initialise</span>
<span class="kw">library</span>()  <span class="co"># see list of all installed packages</span>
<span class="kw">library</span>(<span class="dt">help=</span>car)  <span class="co"># see info about &#39;car&#39; pkg</span></code></pre></div>
<h4>Getting Help</h4>
<p>The easiest way to get help in R is using the <code>?</code> operator. Just append a <code>?</code> before the name of a function you want to get help, R will open find information about the function from the set of installed packages. If you want to search for it outside the installed packages, use <code>??</code> before the function name. <code>??</code> can also help search for partial and incomplete terms.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">help</span>(merge)  <span class="co"># get help page for &#39;merge&#39;</span>
?merge  <span class="co"># lookup &#39;merge&#39; from installed pkgs</span>
??merge  <span class="co"># vague search</span>
<span class="kw">example</span>(merge)  <span class="co"># show code examples</span></code></pre></div>
<h4>What is a working directory and how to set up one?</h4>
<p>A working directory is the reference directory from which R has direct access to read in files. You can read in and write files directly to the working directory without using the full file path. The directory names should be separated by forward slash <code>/</code> or double back slash <code>\\</code> instead of <code>\</code> even for a windows PC.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getwd</span>()  <span class="co"># gets the working directory</span>
<span class="kw">setwd</span>(dirname)  <span class="co"># set the working directory to dirname</span></code></pre></div>
<h4>How to import and export data?</h4>
<p>The most common and convenient way to bring in data to R is through .csv files. There are packages to import data from excel files(.xlsx) and databases, but that will not be covered here.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myData &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;c:/myInputData.txt&quot;</span>, <span class="dt">header =</span> <span class="ot">FALSE</span>, <span class="dt">sep=</span><span class="st">&quot;|&quot;</span>, <span class="dt">colClasses=</span><span class="kw">c</span>(<span class="st">&quot;integer&quot;</span>,<span class="st">&quot;character&quot;</span>,<span class="st">&quot;numeric&quot;</span>) <span class="co"># import &quot;|&quot; separated .txt file</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myData &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;c:/myInputData.csv&quot;</span>, <span class="dt">header=</span><span class="ot">FALSE</span>)  <span class="co"># import csv file</span>
<span class="kw">write.csv</span>(rDataFrame, <span class="st">&quot;c:/output.csv&quot;</span>)  <span class="co"># export </span></code></pre></div>
<p>R will intuitively find out what data type the columns in a data frame should be assigned. If you want to manually assign it, it can be set with the <code>colClasses</code> argument within read.csv(), which is in fact recommended as it improves the efficiency of the import process.</p>
<h4>How to view and delete objects in your console ?</h4>
<p>As you create new variables, by default they get store in what is called a global environment.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="dv">10</span>
b &lt;-<span class="st"> </span><span class="dv">20</span>
<span class="kw">ls</span>()  <span class="co"># list objects in global env</span>
<span class="kw">rm</span>(a)  <span class="co"># delete the object &#39;a&#39;</span>
<span class="kw">rm</span>(<span class="dt">list =</span> <span class="kw">ls</span>())  <span class="co"># caution: delete all objects in .GlobalEnv</span>
<span class="kw">gc</span>()  <span class="co"># free system memory</span></code></pre></div>
<p>However if you choose, you can create a new environment and store them there.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())  <span class="co"># remove all objects in work space</span>
env1 &lt;-<span class="st"> </span><span class="kw">new.env</span>()  <span class="co"># create a new environment</span>
<span class="kw">assign</span>(<span class="st">&quot;a&quot;</span>, <span class="dv">3</span>, <span class="dt">envir =</span> env1)  <span class="co"># store a=3 inside env1</span>
<span class="kw">ls</span>()  <span class="co"># returns objects in .GlobalEnv</span>
<span class="kw">ls</span>(env1)  <span class="co"># returns objects in env1</span>
<span class="kw">get</span>(<span class="st">&#39;a&#39;</span>, <span class="dt">envir=</span>env1)  <span class="co"># retrieve value from env1</span></code></pre></div>
<p>Lets talk about what happened in the above code. Think of an environment as a container that holds objects(variables). The outermost main container is called the global environment(<code>globalenv()</code>). This is the default place will R will store all objects that you create. You can place as many objects as your computer memory will allow it to hold. The point to note is that, since containers are also objects, you can put any number of containers(environments created by <code>new.env()</code>) inside the main container(<code>globalenv()</code>). But, you can look into and access the objects within these inner containers, only by explicitly telling R where you want to look. This is what you did in the last two lines of code above.</p>
<hr />
<h2>Section 2</h2>
<h3>Vectors</h3>
<h4>How to create a vector?</h4>
<p>Vectors can be created using the combine function <code>c()</code>. In order to create vector, you need to feed into <code>c()</code>, all the elements that you need to hold in that vector. Also, vectors can hold data of one type only – like character, numeric, logical. If you try to create a mixture of data types within a vector, say characters and numerics, one of the type will be converted to the other. Now Lets create some.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">15</span>, <span class="dv">40</span>)  <span class="co"># numeric vector</span>
vec2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="ot">NA</span>)  <span class="co"># character vector</span>
vec3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>)  <span class="co"># logical vector</span>
vec4 &lt;-<span class="st"> </span><span class="kw">gl</span>(<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dt">label =</span> <span class="kw">c</span>(<span class="st">&quot;l1&quot;</span>, <span class="st">&quot;l2&quot;</span>, <span class="st">&quot;l3&quot;</span>, <span class="st">&quot;l4&quot;</span>))  <span class="co"># factor with 4 levels</span></code></pre></div>
<p>There are two things you would have noticed. In the exercise 6.a, the class of ‘one_to_6’ was still <code>numeric</code> and not a new ‘vector’ class. Secondly, when you tried to create a mixed vector, all your numbers were automatically converted to characters to give you a ‘character’ class, which is expected as it makes sense to convert the number 1 to character “1”, but the opposite is not true for character “a”.</p>
<h4>How to reference elements of a vector?</h4>
<p>Elements of a vector can be accessed with its index. The first element of a vector has the index 1 and the last element has an index of value length(vectorName).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(vec1)  <span class="co"># 4</span>
<span class="kw">print</span>(vec1[<span class="dv">1</span>])  <span class="co"># 10</span>
<span class="kw">print</span>(vec1[<span class="dv">1</span>:<span class="dv">3</span>])  <span class="co"># 10, 20, 15</span></code></pre></div>
<p>At this point, I would like you to learn, how to initialise a vector to a certain length. But why initialise a vector when you can iteratively add(append) elements to it, especially in a language where you dont even need to declare variables?</p>
<p>The reason is: It saves processing time. When you initialise a vector to hold, say 100 elements, that much space is almost instantly reserved for the vector in your computer’s memory. You can later fill in those spots by indexing the vector, like we just saw. It simply takes more processing time to iteratively append elements to your vector, especially when your vector gets really big.</p>
<p>Here is how to initialise a numeric vector:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">numericVector &lt;-<span class="st"> </span><span class="kw">numeric</span>(<span class="dv">100</span>) <span class="co"># length 100 elements</span></code></pre></div>
<h3>How To Manipulate Vectors</h3>
<h4>Subsetting</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">logic1 &lt;-<span class="st"> </span>vec1 &lt;<span class="st"> </span><span class="dv">15</span>  <span class="co"># create a logical vector, TRUE if value &lt; 15</span>
vec1[logic1]  <span class="co"># elements in TRUE positions will be included in subset</span>
vec1[<span class="dv">1</span>:<span class="dv">2</span>]  <span class="co"># returns elements in 1 &amp; 2 positions.</span>
vec1[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)]  <span class="co"># returns elements in 1 &amp; 3 positions</span>
vec1[-<span class="dv">1</span>]  <span class="co"># returns all elements except in position 1.</span></code></pre></div>
<h4>Sorting</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sort</span>(vec1)  <span class="co"># ascending sort</span>
<span class="kw">sort</span>(vec1, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>)  <span class="co"># Descending sort </span></code></pre></div>
<p>Sorting can also be achieved using the order() function which returns the indices of elements in ascending order.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec1[<span class="kw">order</span>(vec1)]  <span class="co"># ascending sort</span>
vec1[<span class="kw">rev</span>(<span class="kw">order</span>(vec1))]  <span class="co"># descending sort</span></code></pre></div>
<h4>Creating vector sequences and repetitions</h4>
<p>The <code>seq()</code> and <code>rep()</code> functions are used to create custom vector sequences. The rep() function can be used to repeat alphabets also.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dt">by =</span> <span class="dv">2</span>)  <span class="co"># diff between adj elements is 2</span>
<span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dt">length=</span><span class="dv">25</span>)  <span class="co"># length of the vector is 25</span>
<span class="kw">rep</span>(<span class="dv">1</span>, <span class="dv">5</span>)  <span class="co"># repeat 1, five times.</span>
<span class="kw">rep</span>(<span class="dv">1</span>:<span class="dv">3</span>, <span class="dv">5</span>)  <span class="co"># repeat 1:3, 5 times</span>
<span class="kw">rep</span>(<span class="dv">1</span>:<span class="dv">3</span>, <span class="dt">each=</span><span class="dv">5</span>)  <span class="co"># repeat 1 to 3, each 5 times.</span></code></pre></div>
<h4>How To Remove Missing values</h4>
<p>Missing values can be handles using the is.na() function which returns a logical vector with TRUE in positions where there is a missing value(NA)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="ot">NA</span>)  <span class="co"># character vector</span>
<span class="kw">is.na</span>(vec2)  <span class="co"># missing TRUE</span>
!<span class="kw">is.na</span>(vec2)  <span class="co"># missing FALSE</span>
vec2[!<span class="kw">is.na</span>(vec2)]  <span class="co"># return non missing values from vec2</span></code></pre></div>
<h4>Sampling</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">100</span>)  <span class="co"># optional. set it to get same random samples.</span>
<span class="kw">sample</span>(vec1)  <span class="co"># sample all elements randomly</span>
<span class="kw">sample</span>(vec1, <span class="dv">3</span>)  <span class="co"># sample 3 elem without replacement</span>
<span class="kw">sample</span>(vec1, <span class="dv">10</span>, <span class="dt">replace=</span>T)  <span class="co"># sample with replacement</span></code></pre></div>
<hr />
<h2>Section 3</h2>
<h3>Data Frames</h3>
<h4>Creating Data frame and accessing rows and columns</h4>
<p>Data frames is a convenient and popular data object to perform various analyses. Import statements such as read.csv() imports data into R as a data frame, so its just convenient to keep it that way. Now lets create a data frame with the vectors we’d created earlier.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myDf1 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(vec1, vec2)  <span class="co"># make data frame with 2 columns</span>
myDf2 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(vec1, vec3, vec4)
myDf3 &lt;<span class="st"> </span><span class="kw">data.frame</span>(vec1, vec2, vec3)</code></pre></div>
<h4>Built-in Datasets and Basic Operations</h4>
<p>R comes with a set of built-in data frames. For further illustrations we will use the <code>airquality</code> data frame.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(datasets) <span class="co"># initialize</span>
<span class="kw">library</span>(<span class="dt">help=</span>datasets) <span class="co"># display the datasets</span></code></pre></div>
<p>The below set of codes will be frequently used if you are going to be playing around with data. So I highly recommend you to practice these once over and over to get a good handle over them.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(airquality)  <span class="co"># get class</span>
<span class="kw">sapply</span>(airquality, class)  <span class="co"># get class of all columns</span>
<span class="kw">str</span>(airquality)  <span class="co"># structure</span>
<span class="kw">summary</span>(airquality)  <span class="co"># summary of airquality</span>
<span class="kw">head</span>(airquality)  <span class="co"># view the first 6 obs</span>
<span class="kw">fix</span>(airquality)  <span class="co"># view spreadsheet like grid</span>
<span class="kw">rownames</span>(airquality)  <span class="co"># row names</span>
<span class="kw">colnames</span>(airquality)  <span class="co"># columns names</span>
<span class="kw">nrow</span>(airquality)  <span class="co"># number of rows</span>
<span class="kw">ncol</span>(airquality)  <span class="co"># number of columns</span></code></pre></div>
<h4>Append data frames with cbind and rbind</h4>
<p>Lets append dataframes column wise <code>cbind</code> and row wise <code>rbind</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cbind</span>(myDf1, myDf2)  <span class="co"># columns append DFs with same no. rows</span>
<span class="kw">rbind</span>(myDf1, myDf1)  <span class="co"># row append DFs with same no. columns</span></code></pre></div>
<p>Subset Data frame with number indices, subset() and which() methods</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myDf1$vec1  <span class="co"># vec1 column</span>
myDf1[, <span class="dv">1</span>]  <span class="co"># df[row.num, col.num]</span>
myDf1[, <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)]  <span class="co"># columns 1 and 3</span>
myDf1[<span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">2</span>)]  <span class="co"># first 5 rows in column 2</span></code></pre></div>
<p>Subsetting rows and columns can also be done using <code>subset()</code> and with <code>which()</code> functions. <code>which()</code> returns a vector of column or row indices that satisfies the condition. Let check this out with an example.</p>
<p>Below is a code that drops the <code>Temp</code> column from <code>airquality</code> data frame and returns only those observations with Day=1. Note that the <code>which()</code> is an independent function, therefore, the full object name must be used. Just <code>which(Day==1)</code> will not work, since there is no variable called <code>Day</code> defined.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">subset</span>(airquality, Day ==<span class="st"> </span><span class="dv">1</span>, <span class="dt">select =</span> -Temp)  <span class="co"># select Day=1 and exclude &#39;Temp&#39;</span>
airquality[<span class="kw">which</span>(airquality$Day==<span class="dv">1</span>), -<span class="kw">c</span>(<span class="dv">4</span>)]  <span class="co"># same as above</span></code></pre></div>
<h4>Sampling</h4>
<p>Sampling your data into training(data on which models are built) and test(known data on which models are tested) is a common activity. Lets see how this can be done by creating a randomised 70:30 training and test sample from <code>airquality</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">100</span>)
trainIndex &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">1</span>:<span class="kw">nrow</span>(airquality)), <span class="dt">size=</span><span class="kw">nrow</span>(airquality)*<span class="fl">0.7</span>, <span class="dt">replace=</span>F)  <span class="co"># get test sample indices</span>
airquality[trainIndex, ]  <span class="co"># training data</span>
airquality[-trainIndex, ]  <span class="co"># test data</span></code></pre></div>
<p>What was that! Here we create a 70% random sample of the row indices of the airquality data frame and use it to make the training and test samples. As you can see, the arguments that are passed to the sample() function are computed from within. For example, we needed a 70% sample, <code>size = nrow(airquaity) * 0.7</code>, will compute 70% of the number of rows in airquality for the size argument. Moreover, we are actually defining the ‘sample’(1:nrow(airquality)) itself within the function only. Though this is a ‘unclean’ method of writing code, you get the taste of flexibility and control that the language has to offer.</p>
<h4>Merging Dataframes</h4>
<p>Data frames can be merged by a common column variable. The data frames need not be necessarily sorted before performing a merge. If the ‘by’ column has different names, they can be specified with the by.x and by.y. The inner / outer join, left join and right join can be accomplished with <code>all</code>, <code>all.x</code>, <code>all.y</code> arguments of <code>merge()</code>. Check out more on example(merge) in your R console.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">merge</span>(myDf1, myDf2, <span class="dt">by=</span><span class="st">&quot;vec1&quot;</span>)  <span class="co"># merge by &#39;vec1&#39;</span></code></pre></div>
<p>With the dataframes created from code below, perform the various merge operations.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">100</span>)
df1 =<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">StudentId =</span> <span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">10</span>), <span class="dt">Subject =</span> <span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">&quot;Math&quot;</span>, <span class="st">&quot;Science&quot;</span>, <span class="st">&quot;Arts&quot;</span>), <span class="dv">10</span>, <span class="dt">replace=</span>T))
df2 =<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">StudentNum =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">12</span>), <span class="dt">Sport =</span> <span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">&quot;Football&quot;</span>, <span class="st">&quot;Tennis&quot;</span>, <span class="st">&quot;Chess&quot;</span>), <span class="dv">4</span>, <span class="dt">replace=</span>T))</code></pre></div>
<hr />
<h2>Section 4</h2>
<h4>The <code>paste</code> function</h4>
<p><code>paste()</code> is a way to concatenate strings and customise with delimiters. With a clear understanding it comes handy to create long and complicated string patterns that can be dynamically modified. Try out these examples in your R console.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>)  <span class="co"># &quot;a b&quot;</span>
<span class="kw">paste0</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>)  <span class="co"># concatenate without space, &quot;ab&quot;</span>
<span class="kw">paste</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span>)  <span class="co"># same as paste0</span>
<span class="kw">paste</span>(<span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">5</span>:<span class="dv">8</span>), <span class="dt">sep=</span><span class="st">&quot;&quot;</span>)  <span class="co"># &quot;15&quot; &quot;26&quot; &quot;37&quot; &quot;48&quot;</span>
<span class="kw">paste</span>(<span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">5</span>:<span class="dv">8</span>), <span class="dt">sep=</span><span class="st">&quot;&quot;</span>, <span class="dt">collapse=</span><span class="st">&quot;&quot;</span>)  <span class="co"># &quot;15263748&quot;</span>
<span class="kw">paste0</span>(<span class="kw">c</span>(<span class="st">&quot;var&quot;</span>), <span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">5</span>))  <span class="co"># &quot;var1&quot; &quot;var2&quot; &quot;var3&quot; &quot;var4&quot; &quot;var5&quot;</span>
<span class="kw">paste0</span>(<span class="kw">c</span>(<span class="st">&quot;var&quot;</span>, <span class="st">&quot;pred&quot;</span>), <span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">3</span>))  <span class="co"># &quot;var1&quot; &quot;pred2&quot; &quot;var3&quot;</span>
<span class="kw">paste0</span>(<span class="kw">c</span>(<span class="st">&quot;var&quot;</span>, <span class="st">&quot;pred&quot;</span>), <span class="kw">rep</span>(<span class="dv">1</span>:<span class="dv">3</span>, <span class="dt">each=</span><span class="dv">2</span>))  <span class="co"># &quot;var1&quot; &quot;pred1&quot; &quot;var2&quot; &quot;pred2&quot; &quot;var3&quot; &quot;pred3</span></code></pre></div>
<h4>Dealing with dates</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dateString &lt;-<span class="st"> &quot;15/06/2014&quot;</span>
myDate &lt;-<span class="st"> </span><span class="kw">as.Date</span>(dateString, <span class="dt">format=</span><span class="st">&quot;%d/%m/%Y&quot;</span>)
<span class="kw">class</span>(myDate)  <span class="co"># &quot;Date&quot;</span>
myPOSIXltDate %lt;-<span class="st"> </span><span class="kw">as.POSIXlt</span>(myDate)
<span class="kw">class</span>(myPOSIXltDate)  <span class="co"># POSIXlt</span>
myPOSIXctDate &lt;-<span class="st"> </span><span class="kw">as.POSIXct</span>(myPOSIXltDate)  <span class="co"># convert to POSIXct</span></code></pre></div>
<h4>How to view contents of an R object?</h4>
<p>If you come across a new type of R object that you are unfamiliar with and want to see and access its contents, typically one or more of these methods will work. Lets take the example of the <code>POSIXlt</code> date object just created.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attributes</span>(myPOSIXltDate)  <span class="co"># best</span>
<span class="kw">unclass</span>(POSIXltDate)  <span class="co"># works!</span>
<span class="kw">names</span>(myPOSIXltDate)  <span class="co"># doesn&#39;t work on a POSIXlt object</span>
<span class="kw">unlist</span>(myPOSIXltDate)  <span class="co"># works!</span></code></pre></div>
<p>As you can notice, the <code>POSIXlt</code> object we just dissected does not just contain the information displayed on the console when you type its name. It is a good idea to check the object size to know if it has more info that what meets the eye.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">object.size</span>(myDate)  <span class="co"># 216 bytes</span>
<span class="kw">object.size</span>(myPOSIXltDate)  <span class="co"># 1816 bytes</span>
<span class="kw">object.size</span>(myPOSIXctDate)  <span class="co"># 520 bytes</span></code></pre></div>
<p>Now you know what level of information each of the classes provide and the memory usage. It is up to you to decide what to use based on your calculation requirements and data size.</p>
<h4>How To Make Contingency Tables</h4>
<p>Contingency tables gets you a count summary of a vector or 2 dimensional data. Let see how to get the count table for a vector.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(myData)
<span class="co"># table output</span>
<span class="co">#=&gt; 0  1  2  3  4  5  6  7  8  9 </span>
<span class="co">#=&gt; 1  3 10 17 18 12 22  7  8  2</span></code></pre></div>
<p>Similarly, for a data frame, the variable that you want to appear in rows goes as the first argument of table() and the column variable goes as the second argument.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(airquality$Month[<span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">60</span>)], airquality$Temp[<span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">60</span>)]) <span class="co"># first 60/code&gt;</span></code></pre></div>
<h4>List</h4>
<p>Lists are very important. If you need to bundle up objects of different lengths and classes, it can be achieved with lists.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myList &lt;-<span class="st"> </span><span class="kw">list</span>(vec1, vec2, vec3, vec4)

<span class="co">#=&gt; Output</span>
<span class="co">#=&gt; [[1]]</span>
<span class="co">#=&gt; [1] 10 20 15 40</span>
<span class="co">#=&gt; [[2]]</span>
<span class="co">#=&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; NA</span>
<span class="co">#=&gt; [[3]]</span>
<span class="co">#=&gt; [1] TRUE FALSE TRUE TRUE</span>
<span class="co">#=&gt; [[4]]</span>
<span class="co">#=&gt; [1] l1 l2 l3 l4</span>
<span class="co">#=&gt; Levels: l1 l2 l3 l4</span></code></pre></div>
<h4>Referencing lists</h4>
<p>Lists can have multiple levels within.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mylist[<span class="dv">3</span>]  <span class="co"># level 1</span>

<span class="co"># [[3]]</span>

<span class="co"># [1] TRUE FALSE TRUE TRUE</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myList[[<span class="dv">3</span>]]  <span class="co"># level 2: access the vec3 directly</span>
<span class="co">#=&gt; [1] TRUE FALSE TRUE TRUE</span>
myList[[<span class="dv">3</span>]][<span class="dv">3</span>]  <span class="co"># 3rd elem of vec3</span>
<span class="co">#=&gt; [1] TRUE</span>
<span class="kw">lapply</span>(myList, length)  <span class="co"># length of each element as a list</span></code></pre></div>
<h4>Unlisting</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unlist</span>()  <span class="co"># flattens out into a one-level list.</span>
<span class="kw">unlist</span>(myList)  <span class="co"># flattens out</span></code></pre></div>
<h4>If-Else</h4>
<p>One caveat about If-Else statements is to make sure the ‘else’ statement begins in the same line where the <code>}</code> closes. The structure of a If-Else statement is as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">if(checkConditionIfTrue) {
  ....statements..
  ....statements..
} else {   <span class="co"># place the &#39;else&#39; in same line as &#39;}&#39;</span>
  ....statements..
  ....statements..
} </code></pre></div>
<h4>For-Loop</h4>
<p>Where ever possible it is recommended to use one of apply family functions for loops. However the knowledge is essential. Here is the format:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">for(counterVar in <span class="kw">c</span>(<span class="dv">1</span>:n)){
  .... statements..
}</code></pre></div>
<p>Problem statement: Create a character vector with length of number-of-rows-of-iris-dataset, such that, each element gets a value “greater than 5” if corresponding ‘Sepal.Length’ &gt; 5, else it gets “lesser than 5”.</p>
<h4>The apply family</h4>
<p><strong>apply():</strong> Apply FUN through a data frame or matrix by rows or columns.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myData &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">seq</span>(<span class="dv">1</span>,<span class="dv">16</span>), <span class="dv">4</span>, <span class="dv">4</span>)  <span class="co"># make a matrix</span>
<span class="kw">apply</span>(myData, <span class="dv">1</span>, <span class="dt">FUN=</span>min)  <span class="co"># apply &#39;min&#39; by rows</span>
<span class="co">#=&gt; [1] 1 2 3 4</span>

<span class="kw">apply</span>(myData, <span class="dv">2</span>, <span class="dt">FUN=</span>min)  <span class="co"># apply &#39;min&#39; by columns</span>
<span class="co">#=&gt; [1] 4 8 12 16</span>

<span class="kw">apply</span>(<span class="kw">data.frame</span>(<span class="dv">1</span>:<span class="dv">5</span>), <span class="dv">1</span>, <span class="dt">FUN=</span>function(x) {x^<span class="dv">2</span>}  <span class="co"># square of 1,2,3,4,5</span>
<span class="co">#=&gt; [1] 1 4 9 16 25</span></code></pre></div>
<p><strong>lapply():</strong> Apply FUN to each element in a list(or) to columns of a data frame and return the result as a list</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lapply</span>(airquality, class)  <span class="co"># return classes of each column in &#39;airquality&#39; in a list</span></code></pre></div>
<p><strong>sapply():</strong> Apply FUN to each element of a list(or) to columns of a data frame and return the result as a vector.</p>
<p>Lets look at an example to get the class of each column in a data frame.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sapply</span>(airquality, class)  <span class="co"># return classes of each column in &#39;airquality&#39;</span>
<span class="co">#=&gt;    Ozone    Solar.R      Wind      Temp     Month       Day</span>
<span class="co">#=&gt; &quot;integer&quot; &quot;integer&quot; &quot;numeric&quot; &quot;integer&quot; &quot;integer&quot; &quot;integer&quot;</span></code></pre></div>
<p>vapply(): Similar to <code>sapply()</code> but faster. You need to supply an additional <code>FUN.VALUE</code> argument that is a sample value of the returned output. A sample value could be <code>character(0)</code> for a string, <code>numeric(0)</code> or <code>0L</code> for a number, <code>logical(0)</code> for a boolean.. and so on.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">a =</span> <span class="dv">1</span>, <span class="dt">b =</span> <span class="dv">1</span>:<span class="dv">3</span>, <span class="dt">c =</span> <span class="dv">10</span>:<span class="dv">100</span>)  <span class="co"># make a list</span>
<span class="kw">vapply</span>(x, <span class="dt">FUN =</span> length, <span class="dt">FUN.VALUE =</span> 0L)  <span class="co"># FUN.VALUE defines a sample format of output</span></code></pre></div>
<h4>Error Handling</h4>
<p>There are ways to graciously handle error messages in R. The first and the most simple way is to tell R not to display any error messages, no matter how brutal it is. Try the following code in your R console, you will notice that you R does not display error messages right after turn error messages OFF. You can turn it back ON by setting this to <code>TRUE</code> again.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">options</span>(<span class="dt">show.error.messages=</span>F) <span class="co"># turn off</span>
<span class="dv">1</span> &lt;-<span class="dv">1</span>  <span class="co">#=&gt; No error message is displayed.</span>

<span class="kw">options</span>(<span class="dt">show.error.messages=</span>T) <span class="co"># turn it back on</span>
<span class="dv">1</span> &lt;-<span class="st"> </span><span class="dv">1</span>
<span class="co">#=&gt; Error in 1 &lt;- 1 : invalid(do_set) left-hand side to assignment</span></code></pre></div>
<p>Though you have turned off displaying error messages above, you have not actually ‘handled’ it. You can say the error messages are ‘handled’ when you are able to perform some alternative measures in the event errors happen. In the code below, we have a simple for-loop iterating 10 times, where the counter ‘i’ takes the values 1 – 10. You are going to intentially trigger an error and see what value the counter i holds at the end of the loop. If the loop had run in full successfully, i should hold the value 10.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">for(i in <span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">10</span>)) {
  <span class="dv">1</span> &lt;-<span class="st"> </span><span class="dv">1</span> <span class="co"># trigger the error</span>
}
<span class="kw">print</span>(i) <span class="co"># i equals 1. Never ran through full loop</span></code></pre></div>
<p>Without the error handling feature, the loop is broken as soon as an error is encountered and the rest of the iterations are abruptly stopped. However, there are scenarios where you will want the loop to continue even if an error is encountered. This can be easily done by passing the error-prone function into a <code>try()</code> function. In this case, the loop continues to iterate even after it encounters an error.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">for(i in <span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">10</span>)) {
  triedOut &lt;-<span class="st"> </span><span class="kw">try</span>(<span class="dv">1</span> &lt;-<span class="st"> </span><span class="dv">1</span>) <span class="co"># try an error prone statement.</span>
}
<span class="kw">print</span>(i) <span class="co"># i equals 10. Runs through full loop</span></code></pre></div>
<p>Further more, you can find out if an error did really occur by checking for the class of stored <code>triedOut</code> variable. If an error really did occur, it will have the class named <code>try-error</code>. You can get creative by having a condition that checks the class of this variable, and take alternative measures.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(triedOut) <span class="co"># &quot;try-error&quot;</span></code></pre></div>
<p>You can even pass multiple lines of code within <code>try()</code> by enclosing them in a pair of curly braces <code>{}</code>. We are almost set with error handling. But your knowledge of handling errors is not complete without knowing about <code>tryCatch()</code>. <code>tryCatch()</code> lets you handle errors in a more structured fashion, encompassing the actual error-handling part(as a ‘error’ function) in one of its argument. Time to introduce the <code>tryCatch()</code>.</p>
<h4>Error handling with tryCatch()</h4>
<p>The <code>trycatch()</code> function has three blocks written within curly braces as seen in code below. The first curly brace block takes in the statements, just like the <code>try()</code> function we saw earlier. Like <code>try()</code>, it can now take multiple lines of code within the 1st set of curly brackets.</p>
<p>If an error was encountered in ANY of the statements in the first block, then the error message generated will be stored in a <code>err</code> variable(see code below) that the error handling function(called ‘error’) uses. You can choose to print out this error message, do some alternative calculation or whatever you want. You can also even perform a completely different set of logics within this function that doesn’t involve the error message. Its really upto you. The last set of curly braces called <code>finally</code> is meant to be executed regardless of whether an error did or did not occur. You may choose to ignore adding any statements to this part altogether.</p>
<p>Here is an example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tryCatch</span>({<span class="dv">1</span> &lt;-<span class="st"> </span><span class="dv">1</span>; <span class="kw">print</span>(<span class="st">&quot;Lets create an error&quot;</span>)}, <span class="co"># First block</span>
<span class="dt">error=</span>function(err){<span class="kw">print</span>(err); <span class="kw">print</span>(<span class="st">&quot;Error Line&quot;</span>)},  <span class="co"># Second Block(optional)</span>
<span class="dt">finally =</span> {<span class="kw">print</span>(<span class="st">&quot;finally print this&quot;</span>)})<span class="co"># Third Block(optional)</span>
<span class="co">#=&gt; [1] &quot;Lets create an error&quot;</span>
<span class="co">#=&gt; &lt;simpleError in 1 &lt;- 1: invalid(do_set) left-hand side to assignment&gt;</span>
<span class="co">#=&gt; [1] &quot;Error Line&quot;</span>
<span class="co">#=&gt; [1] &quot;finally print this&quot;</span></code></pre></div>
<h4>Final Note</h4>
<p>You will come across many more cool R functions in future that can do really cool stuff. The number of functions and facilities that R has to offer will keep growing. You will have the access and opportunity to learn them on a needs-to-know basis from here on. In that sense, the learning will never be complete. However, in this exercise, we have covered the important ones you need to worry about at this stage. So begin writing code with renewed confidence. Happy Learning!</p>
<hr />
